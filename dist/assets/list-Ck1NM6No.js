import{r as f,b as B,o,c as a,a as e,i as E,f as L,v as h,F as C,h as N,t as m,j as b,s as q,x as F}from"./index-BiaFJ7TC.js";const x={key:0},R={key:0},z=e("h1",null,"Mail Lists",-1),G=e("summary",{role:"button"},"Create New List",-1),H=e("input",{type:"submit",value:"Create"},null,-1),K=["onClick"],P=["onClick"],Q=["onClick"],W={key:1},X={key:2},Y=e("summary",{role:"button"},"More Options",-1),Z=e("summary",{role:"button"},"Add new Email",-1),ee=e("input",{type:"submit",value:"Add"},null,-1),te=e("summary",{role:"button"},"Import Emails",-1),le=["onClick"],se=e("summary",{role:"button"},"Add new Email",-1),ie=e("input",{type:"submit",value:"Add"},null,-1),ne=e("summary",{role:"button"},"Import Emails",-1),oe={role:"alert"},ae={key:1},ue=e("p",null,"Loading Configuration...",-1),re=[ue],me={key:2},de=e("p",null,"There are no lists found. please create a list and add emails",-1),ve=[de],ce={__name:"list",setup(O){const i=f({loaded:!1,lists:[]}),s=f({view:"list",currentList:null}),_=f(""),d=f(""),v=f(""),g=f(""),r=n=>{g.value=n,setTimeout(()=>{g.value=""},4e3)};B(()=>{var n=JSON.parse(localStorage.getItem("maillist"))||{lists:[]};i.value={loaded:!0,...n}});const c=()=>{localStorage.setItem("maillist",JSON.stringify(i.value))},J=()=>{_.value.trim()!==""&&(i.value.lists.push({name:_.value.trim(),items:[]}),_.value="",c(),r("List Created Successfully!"))},S=n=>{confirm("Are you sure you want to delete this list?")&&(i.value.lists.splice(n,1),c(),r("List Deleted Successfully!"),s.value.view="list")},w=n=>{s.value.currentList=n,s.value.view="edit",r("Showing Edit Screen")},I=()=>{c(),r("List Updated Successfully!"),s.value.view="single"},V=()=>{d.value.trim()!==""&&v.value.trim()!==""?(i.value.lists[s.value.currentList].items.push({name:d.value.trim(),email:v.value.trim()}),d.value="",v.value="",c(),r("Email Added")):r("All Informations are mandatory")},M=n=>{i.value.lists[s.value.currentList].items.splice(n,1),c(),r("Email Removed")},U=n=>{s.value.currentList=n,s.value.view="single",r("Showing Single List")},D=()=>{s.value.view="list"},k=async(n,l)=>{const t=n.target.files[0];if(t){const u=new FileReader;u.onload=y=>{const $=y.target.result;if(l==="json")try{JSON.parse($).forEach(p=>{p.name&&p.email&&i.value.lists[s.value.currentList].items.push({name:p.name,email:p.email})}),c(),r("Emails Imported Successfully!")}catch{r("Invalid JSON file")}else l==="csv"&&($.split(`
`).slice(1).forEach(p=>{const[A,T]=p.split(",");A&&T&&i.value.lists[s.value.currentList].items.push({name:A.trim(),email:T.trim()})}),c(),r("Emails Imported Successfully!"))},u.readAsText(t)}};return(n,l)=>(o(),a(C,null,[i.value.loaded?(o(),a("div",x,[s.value.view==="list"?(o(),a("div",R,[z,e("details",null,[G,e("form",{onSubmit:E(J,["prevent"])},[L(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>_.value=t),placeholder:"New list name",required:""},null,512),[[h,_.value]]),H],32)]),e("ul",null,[(o(!0),a(C,null,N(i.value.lists,(t,u)=>(o(),a("li",{key:u},[e("span",{onClick:y=>U(u),style:{cursor:"pointer"}},m(t.name),9,K),e("button",{onClick:y=>w(u)},"Edit",8,P),e("button",{onClick:y=>S(u)},"Delete",8,Q)]))),128))])])):b("",!0),s.value.view==="single"?(o(),a("div",W,[e("button",{onClick:D},"Back"),e("h2",null,m(i.value.lists[s.value.currentList].name),1),e("button",{onClick:l[1]||(l[1]=t=>w(s.value.currentList))},"Edit"),e("button",{onClick:l[2]||(l[2]=t=>S(s.value.currentList))},"Delete"),e("ul",null,[(o(!0),a(C,null,N(i.value.lists[s.value.currentList].items,(t,u)=>(o(),a("li",{key:u},m(t.name)+" - "+m(t.email),1))),128))]),e("button",{onClick:l[3]||(l[3]=t=>w(s.value.currentList))},"Edit"),e("button",{onClick:l[4]||(l[4]=t=>S(s.value.currentList))},"Delete")])):b("",!0),s.value.view==="edit"?(o(),a("div",X,[e("button",{onClick:D},"Back"),e("h2",null,"Edit "+m(i.value.lists[s.value.currentList].name),1),e("details",null,[Y,e("details",null,[Z,e("form",{onSubmit:E(V,["prevent"])},[L(e("input",{"onUpdate:modelValue":l[5]||(l[5]=t=>d.value=t),placeholder:"Name",required:""},null,512),[[h,d.value]]),L(e("input",{"onUpdate:modelValue":l[6]||(l[6]=t=>v.value=t),placeholder:"Email",required:""},null,512),[[h,v.value]]),ee],32)]),e("details",null,[te,e("input",{type:"file",accept:".json",onChange:l[7]||(l[7]=t=>k(t,"json")),"aria-label":"Import from JSON"},null,32),e("input",{type:"file",accept:".csv",onChange:l[8]||(l[8]=t=>k(t,"csv")),"aria-label":"Import from CSV"},null,32)]),e("button",{onClick:I},"Save Changes")]),e("ul",null,[(o(!0),a(C,null,N(i.value.lists[s.value.currentList].items,(t,u)=>(o(),a("li",{key:u},[q(m(t.name)+" - "+m(t.email)+" ",1),e("button",{onClick:y=>M(u)},"Remove",8,le)]))),128))]),e("details",null,[se,e("form",{onSubmit:E(V,["prevent"])},[L(e("input",{"onUpdate:modelValue":l[9]||(l[9]=t=>d.value=t),placeholder:"Name",required:""},null,512),[[h,d.value]]),L(e("input",{"onUpdate:modelValue":l[10]||(l[10]=t=>v.value=t),placeholder:"Email",required:""},null,512),[[h,v.value]]),ie],32)]),e("details",null,[ne,e("input",{type:"file",accept:".json",onChange:l[11]||(l[11]=t=>k(t,"json")),"aria-label":"Import from JSON"},null,32),e("input",{type:"file",accept:".csv",onChange:l[12]||(l[12]=t=>k(t,"csv")),"aria-label":"Import from CSV"},null,32)]),e("button",{onClick:I},"Save Changes")])):b("",!0),e("p",oe,m(g.value),1)])):(o(),a("div",ae,re)),i.value.lists.length==0?(o(),a("div",me,ve)):b("",!0)],64))}},fe={__name:"list",setup(O){return B(()=>{document.title="my Lists | Transport"}),(i,s)=>(o(),F(ce))}};export{fe as default};
